# C++11新特性emplace操作

-阿发 2016-05-26 11:28:16  28634  收藏 19
分类专栏： C++ 文章标签： C++
版权

C++
专栏收录该内容
2 篇文章0 订阅
订阅专栏
emplace操作是C++11新特性，新引入的的三个成员emlace_front、empace 和 emplace_back,这些操作构造而不是拷贝元素到容器中，这些操作分别对应push_front、insert 和push_back，允许我们将元素放在容器头部、一个指定的位置和容器尾部。

两者的区别
当调用insert时，我们将元素类型的对象传递给insert，元素的对象被拷贝到容器中，而当我们使用emplace时，我们将参数传递元素类型的构造函，emplace使用这些参数在容器管理的内存空间中直接构造元素。

例子
假定d是一个Date类型的容器。

```cpp
//使用三个参数的Date构造函数,在容器管理的内存空间中构造新元素。
d.emplace_back(“2016”,”05”,”26”);

//错误，push_back没有这种用法
d.push_back(“2016”,”05”,”26”);

//push_back()创建一个临时对象，然后将临时对象拷贝到容器中
d.push_back(Date(“2016”,”05”,”26”));
```





通过例子发现，使用C++11新特性emplace向容器中添加新元素，在容器管理的内存空间中构造新元素，与insert相比，省去了构造临时对象，减少了内存开销。

Note
emplace函数在容器中直接构造元素，传递给emplace函数的参数必须与元素类型的构造函数相匹配。