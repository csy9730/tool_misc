## [【C++容器】数组和vector、array三者区别和联系](https://www.cnblogs.com/bandaoyu/p/14625388.html)

**目录**

[一、数组](https://www.cnblogs.com/bandaoyu/p/14625388.html#%E4%B8%80%E3%80%81%E6%95%B0%E7%BB%84)

[二、向量vector](https://www.cnblogs.com/bandaoyu/p/14625388.html#%E4%BA%8C%E3%80%81%E5%90%91%E9%87%8Fvector)

[三、数组与vector的对比](https://www.cnblogs.com/bandaoyu/p/14625388.html#%E4%B8%89%E3%80%81%E6%95%B0%E7%BB%84%E4%B8%8Evector%E7%9A%84%E5%AF%B9%E6%AF%94)

[array和vector，数组三者区别和联系](https://www.cnblogs.com/bandaoyu/p/14625388.html#array%E5%92%8Cvector%EF%BC%8C%E6%95%B0%E7%BB%84%E4%B8%89%E8%80%85%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB)

[共同点](https://www.cnblogs.com/bandaoyu/p/14625388.html#%E5%85%B1%E5%90%8C%E7%82%B9)

[ 不同点](https://www.cnblogs.com/bandaoyu/p/14625388.html#%C2%A0%E4%B8%8D%E5%90%8C%E7%82%B9)

------

 

本文基于邓俊辉编著《数据结构（C++语言版）（第3版）》、《C++ Primer（第5版）》以及网上的相关博文而写，博主水平有限，若有不妥处，欢迎指出。

 

## **一、数组**

C++中数组是一种内置的数据类型。

数组是存放类型相同的对象的容器，数组的大小确定不变，不能随意向数组中增加元素。

### 1、定义和初始化内置数组

（1）数组的大小不变，（a[d]，d为数组的维度），数组的维度必须是一个常量表达式。定义数组的时，必须指定数组的类型和大小。

（2）初始化时，允许不指明数组的维度，不指明维度，则编译器根据数组初始值的大小推测出维度；若指定维度，则初始值的个数要小于等于维度，当小于时，不足的部分为0（其实还是等于维度）。

```cpp
int a[]={1,2,3};    //数组a的大小为3；
int a[5]={1,2,3};    //等价于{1,2,3,0,0},大小为5
int a[5]={1,2,3,4,5,6};    //错误，初始值过多
 
```

 还有一种特殊的情况：字符数组。当用字符串字面值去初始化数组时，要注意字符串字面值的后面还有一个空字符。也就是说，数组的大小要等于字面值的大小加1。

**特别注意：不允许拷贝和赋值------不能将数组的内容拷贝给其他数组作为初始值，也不能用数组为其他数组赋值。**

```cpp
int a[]={1,2,3};    
int a2[]=a;            //错误
a2=a;                //错误
```

###  2、访问数组元素

数组的索引是从0开始，如：包含10个元素的数组a，其索引是从0到9而非1到10，若是a[10]则下标越界。

另外，使用数组下标时，其类型是size_t，在头文件cstddef中。

## **二、向量**vector

C++中vector为类模板。

vector是类型相同的对象的容器，vector的大小可以变化，可以向数组中增加元素。

### 1、定义和初始化vector对象

初始化的方式比较多，有如下几种：

 

```cpp
vector<T> v1;                    //v1为空，执行默认初始化
vector<T> v2(v1);                //v2中包含v1所有元素的副本
vector<T> v2=v1;                //等价于v2(v1)
vector<T> v3(n,val);            //v3中包含n个重复元素，每个元素的值都是val
vector<T> v4(n);                //v4包含n个重复执行了值初始化的对象
vector<T> v5{a,b,c...};         //包含初始化元素个数，每个元素被对应的赋予相应的值
vector<T> v5={a,b,c...};        //等价v5{a,b,c...}
```

 

 注意事项：

（1）vector<T> v1，只用默认初始化时，不能通过下标进行添加元素。也就是说，当你将v1初始化为空时，假如你想向v1中添加10个元素，不能通过v1[2]=3;等形式添加，因为，别人为空，压根不知道v1[2]是什么东东。

（2）注意vector<T> v4(n)和vector<T> v4{n}的区别。前者说的是，v4中有n个相同的元素，至于值为多少要看相应对象的初始化值；而后者，则是说v4中只有一个元素，其值为n。

（3）不能使用包含着多个值的括号去初始化vector对象。注意和或括号的区别。

```cpp
1 vector<int> intV(1,2,3);        //错误 
```

### 2、向vector对象中添加对象

利用vector的成员函数push_back向其中添加对象：``

```cpp
vector<int> v;
for(int i = 0; i != 100; ++i)
{
    v.push_back(i);
    
}
```

 **注意：**

若是循环体内包含向vector对象添加元素的语句，则不能使用范围for循环。因为范围for语句不应改变其所遍历序列的额大小。原因如下：

 

```cpp
vector<int> v={1,2,3,4,5,6,7,8,9};
for(auto &r: v)
{
    r*=2;
}

// 等价于
for(auto beg=v.begin(),end=v.end();beg !=end;++beg)
{
    auto &r=*beg;
    r*=2;
}
```

 

 **即在范围for语句中，预存了end()的值，一旦在序列中添加（删除）元素，end函数的值就可能变的无效了。**

### 3、vector的扩容、插入和删除

（1）扩容

vector的底层数据结构时数组。

当vector中的可用空间耗尽时，就要动态第扩大内部数组的容量。直接在原有物理空间的基础上追加空间？这不现实。数组特定的地址方式要求，物理空间必须地址连续，而我们无法保证其尾部总是预留了足够空间可供拓展。一种方法是，申请一个容量更大的数组，并将原数组中的成员都搬迁至新空间，再在其后方进行插入操作。新数组的地址由OS分配，与原数据区没有直接的关系。**新数组的容量总是取作原数组的两倍**。

（2）插入和删除

插入给定值的过程是，先找到要插入的位置，然后将这个位置（包括这个位置）的元素向后整体移动一位，然后将该位置的元素复制为给定值。删除过程则是将该位置以后的所有元素整体前移一位。

（2）vector的size和capacity

size指vector容器当前拥有的元素个数，capacity指容器在必须分配新存储空间之前可以存储的元素总数，capacity总是大于或等于size的。

## **三、数组与vector的对比**

### 1、内存中的位置

C++中**数组**为内置的数据类型，存放在**栈**中，其内存的分配和释放完全由系统自动完成；vector，存放在自由存储区(**堆)**中，由STL库中程序负责内存的分配和释放，使用方便。

### 2、大小能否变化

数组的大小在初始化后就固定不变，而vector可以通过push_back或pop等操作进行变化。

### 3、初始化

数组不能将数组的内容拷贝给其他数组作为初始值，也不能用数组为其他数组赋值；而向量可以。

### 4、执行效率

数组>vector向量。主要原因是vector的扩容过程要消耗大量的时间。

**Ref：**

[ http://www.cnblogs.com/chhuach2005/p/3627011.html](http://www.cnblogs.com/chhuach2005/p/3627011.html)

## array和vector，数组三者区别和联系

 

### 共同点

（1.）都和数组相似，都可以使用标准数组的表示方法来访问每个元素（array和vector都对下标运算符[ ]进行了重载）
（2.）三者的存储都是连续的，可以进行随机访问

###   不同点

（0.）数组是不安全的，array和vector是比较安全的（有效的避免越界等问题）
（1.）**array**对象和数组存储在相同的**内存区域（栈）**中，**vector**对象存储在自由存储区**（堆）**
（2.）array可以将一个对象赋值给另一个array对象，但是数组不行
（3.）**vector属于变长的容器**，即可以根据数据的插入和删除重新构造容器容量；但是**array和数组属于定长容器**
（4.）vector和array提供了更好的数据访问机制，即可以使用front()和back()以及at()（at()可以避免a[-1]访问越界的问题）访问方式，使得访问更加安全。而数组只能通过下标访问，在写程序中很容易出现越界的错误
（5.）vector和array提供了更好的遍历机制，即有正向迭代器和反向迭代器
（6.）vector和array提供了size()和Empty()，而数组只能通过sizeof()/strlen()以及遍历计数来获取大小和是否为空
（7.）vector和array提供了两个容器对象的内容交换，即swap()的机制，而数组对于交换只能通过遍历的方式逐个交换元素
（8.）array提供了初始化所有成员的方法fill（）
（9.）**由于vector的动态内存变化的机制，在插入和删除时，需要考虑迭代的是否有效问题**
（10.）vector和array在声明变量后，在声明周期完成后，会自动地释放其所占用的内存。对于数组如果用new[ ]/malloc申请的空间，必须用对应的delete[ ]和free来释放内存
 

希望通过我的总结大家能够对这三者有一个很深刻的认识，再合适的地方选择合适的结构。

本文是参考《C++primer》和《C和指针》
 
原文链接：https://blog.csdn.net/alidada_blog/article/details/83029438

用法
 

```cpp
std::array<int,5> arr;
std::array<int,5> a = {10, 20, 30, 40, 50};
```

 