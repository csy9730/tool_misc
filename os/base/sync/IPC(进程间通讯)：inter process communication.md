# IPC(进程间通讯)：inter process communication


[Lynn](https://www.zhihu.com/people/lynn-es)

关注他

2 人赞同了该文章

### 管道

（1）**管道是半双工的**，数据只能向一个方向流动；需要双方通信时，需要建立起两个管道；

（2）**只能用于父子进程或者兄弟进程之**间（具有亲缘关系的进程）；

（3）**单独构成一种独立的文件系统：**管道对于管道两端的进程而言，就是一个文件，但它不是普通的文件，它不属于某种文件系统，而是自立门户，单独构成一种文件系统，并且只存在与内存中。

（4）**数据的读出和写入**：一个进程向管道中写的内容被管道另一端的进程读出。写入的内容每次都添加在管道缓冲区的末尾，并且每次都是从缓冲区的头部读出数据。

### 有名管道

（1）缓存文件创建在文件系统中。所以通过FIFO不相关的进程也能交换数据。

### 信号

1.信号是Linux系统中用于进程间互相通信或者操作的一种机制，信号可以在任何时候发给某一进程，而无需知道该进程的状态。

2.如果该进程当前并未处于执行状态，则该信号就有内核保存起来，直到该进程恢复执行并传递给它为止。

3.如果一个信号被进程设置为阻塞，则该信号的传递被延迟，直到其阻塞被取消时信号才被传递给进程。

### 信号来源

信号是软件层次上对中断机制的一种模拟，是一种异步通信方式，信号可以在用户空间进程和内核之间直接交互，内核可以利用信号来通知用户空间的进程发生了哪些系统事件，信号事件主要有两个来源：

- 硬件来源：用户按键输入Ctrl+C退出、硬件异常如无效的存储访问等。
- 软件来源：终止进程信号、其他进程调用kill函数、软件异常产生信号。

### 消息队列

1. 消息生产者不需要关注，消费者的状态。
2. 消息生产者产生消息后，无论消息生产者状态如何，消息都能被消费者接受。消息的存续行以来操作系统内核的生命周期。

消息队列中的每条消息通常具有以下属性：

- 一个表示优先级的整数；
- 消息的数据部分的长度；
- 消息数据本身

### 共享内存

1.共享内存的使用需要用户自己保证同步 2.共享内存是最快的IPC方式 注： Linux下有三种共享内存的IPC技术：System V共享内存、共享文件映射(mmap)、POSIX共享内存。

### 套接字

1.可以在单机进行也可以跨网络进行。 2.socket 内存通信属于网络层和应用层之间的桥梁。

### 信号量

1. 信号量用来防止多个进程共享资源引发问题。
2. 内存共享 就需要使用信号量。

**工作原理**

由于信号量只能进行两种操作等待和发送信号，即P(sv)和V(sv),他们的行为是这样的： P(sv)：如果sv的值大于零，就给它减1；如果它的值为零，就挂起该进程的执行 V(sv)：如果有其他进程因等待sv而被挂起，就让它恢复运行，如果没有进程因等待sv而挂起，就给它加1.

举个例子，就是 两个进程共享信号量sv，一旦其中一个进程执行了P(sv)操作，它将得到信号量，并可以进入临界区，使sv减1。而第二个进程将被阻止进入临界区，因为 当它试图执行P(sv)时，sv为0，它会被挂起以等待第一个进程离开临界区域并执行V(sv)释放信号量，这时第二个进程就可以恢复执行。