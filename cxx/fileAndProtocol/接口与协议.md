# 接口与协议和服务

## 接口
接口interface

## 协议
协议 是规则的集合，包括 服务，假设依赖，词典，词法，语法。有语法/语义/时序三大要素组成。
服务是对外提供的功能，
假设依赖是必不可少的基础，
词典/语法/词法是常见的设计形式。
包括对结构/顺序/格式的约束
* 结构： 对应字典，key和value以及嵌套， 
* 顺序： 对应序列化顺序，
* 格式： 对应标准化表达，包括类型和类型转化，例如 定义日期时间的标准格式，浮点数长度和格式
简单情况下，一种格式对应一种 类型，涉及到多种格式的互相转化

常见操作有：解析& 生成，协议校验，易读处理，反读处理，


如何把默认的背景信息给记录下来，作为协议背景
## 服务
服务（service）
## 区别
接口interface　协议protocol，两者似乎密不可分，但又有区别。

接口是具体的，协议是抽象的。接口是明显的，协议是隐含的。
接口是垂直的，协议是水平的，通信双方是对等的，
接口是下层的实现提供给上层，协议是双方交互的基础，接口实现隐含了一份默认协议。
具体的接口使用范围更窄，抽象的协议的适用范围更广。
定义一份接口容易，如何为它设计一套稳定可靠的协议困难。

服务是垂直的，协议是水平的， 下层为上层的提供的实现为服务，本层看不到的底层/跨层协议不作为服务。例如TCP层需要IP层的服务，但无法发现链路层的服务。
## misc
透明传输协议 ： 对于传输内容没有约束，通常通过 开始符/结束符/转义符实现。通常用于使某些旧设备能够穿过新传输途径达到其他设备，而旧设备对新传输途径无感知




接口设计：
命令行接口
本地函数接口，
RPC函数接口
restful接口

通用协议设计：
json协议
xml协议
protobuf协议

TLV协议
HTTP协议
TCP协议
UDP协议

协议支持嵌套，例如IP嵌套TCP在嵌套HTTP协议
HTTP协议又附带了JSON格式数据包。

json/字典和object的区别，
json字典过于灵活，没有固定的field。object有固定的field
某些情况需要对json进行校验，需要json-scheme提供



协议和接口有何区别？
颗粒度不同，接口的颗粒度更小？
一个结构，一个是内容。

网络七层模型中 ，
表示层和会话层为何被应用层合并了？安全层充当何种角色？

函数型接口又分为多参数，和struct接口
