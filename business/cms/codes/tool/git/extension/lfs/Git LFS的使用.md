# Git LFS的使用

[TOC]

还没使用git之前，二进制文件和源代码分成两块，分别存放到不同的svn仓库上（防止二进制文件中有病毒感染服务器，所以做了这种隔离）。
现在公司已经切换到git上进行版本管理了，那么就可以使用git lfs来管理这些二进制文件，这样就可以让源码和二进制文件和谐共存于一处，从而不像以前那样，需要分别做两次更新。

### Git LFS的简单理解

Git LFS 是 Github 开发的一个 Git 的扩展，用于实现 Git 对大文件的支持

LFS(Large File Storage) 就是为了解决这一问题而产生的工具.
 它将你所标记的大文件保存至另外的仓库,而在主仓库仅保留其轻量级指针.
 那么在你检出版本时,根据指针的变化情况下更新对应的大文件.而不是在本地保存所有版本的大文件



LFS其实是git的一个扩展，并没有改变git的工作方式，有点像耍了个小花招，把指定需要lfs管理的文件替换成了一个指针文件交给git进行版本管理；
在pull/push等这些操作中，lfs又通过lfs服务器把这些文件的真身给下载或上传回来；
通过这样的手段，使得本地仓库的体积大大减小，而不会出现随着这些文件的版本增多而体积剧烈膨胀的情况；
个人觉得这种把存储负担转移给了服务器的做法，是不是有违git去中心化的理念，毕竟lfs这样做其实算是强依赖于这个lfs服务器了，本地仓库并不是一个完整的仓库

#### 安装

Windows下常用的Git for Windows和Source Tree都已经集成了lfs，不需要另外安装了，可以运行命令`git lfs`查看

#### 使用



执行 `git lfs install` 开启lfs功能

使用 `git lfs track` 命令进行大文件追踪 例如`git lfs track "*.png"` 追踪所有后缀为png的文件

此时，仓库的根目录下会自动创建.gitattribute文件，里面就记录了使用lfs的文件

后续添加新的类型可以用`git lfs track`命令，也可以直接编辑.gitattribute文件

提交代码需要将`gitattributes`文件提交至仓库. 它保存了文件的追踪记录

使用 `git lfs track` 查看现有的文件追踪模式

提交后运行`git lfs ls-files` 可以显示当前跟踪的文件列表

将代码 push 到远程仓库后，LFS 跟踪的文件会以『Git LFS』的形式显示:

clone 时 使用`git clone` 或 `git lfs clone`均可

