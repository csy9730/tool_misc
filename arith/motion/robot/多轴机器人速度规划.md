# 多轴机器人速度规划
[多轴机器人速度规划的主导轴问题选取？ - 知乎 - Zhihu](https://www.zhihu.com/question/265733207)

2018-1-21 · 多轴机器人速度规划的主导轴问题选取？. 北航在读博士，有问题请教各位大神。. 目前常用的机器人速度规划方法有T、S型，以S型最常用； 机器人多轴同步联动时，进行S型速度规


多轴同步，长轴时间长，短轴时间短，要想两个轴的运动同步（同时开始，同时结束）。
注意，此时的轨迹不可保证是直线。

moveJ ：轨迹任意。
- 单轴各自规划，不做同步
- 多轴总时间同步，使用共同的最小加速度，再根据加速度计算各轨迹的时间，使用最长时间的轴作为长轴，松弛短轴的速度。
- 多轴总时间同步，使用长轴的时间来约束短轴的速度或加速度。

#### 多轴插补为什么普遍使用梯形速度曲线？
[多轴插补为什么普遍使用梯形速度曲线？](https://www.zhihu.com/question/47474538)


##### MoveJ 和 MoveL指令的区别

MoveL和MoveJ的联系
- 都是机器人的运动指令；
- 都能精确到达一个点（Z=fine）；
- 运动路径唯一；

MoveJ	MoveL
轨迹为弧线	轨迹为直线
运动路径不完全可控	运动路径可控
运动中不会有死点	运动中会有死点
常用于大范围移动	常由于工作状态移动

##### MoveJ 和 MoveAbsJ 指令的区别
MoveJ 和 MoveAbsJ 的运动轨迹相同，都是以关节方式运动，所不同的是采用的数据点类型不同

##### robtarget 和 jointtarget 数据的区别
- robtarget：以机器人TCP点的位置和姿态记录机器人位置。用于MoveJ、MoveL、MoveC 指令中
- jointtarget：以机器人各个关节值来记录机器人位置，常用于机器人运动至特定的关节角，用于 MoveAbsJ 指令中


#### 移动和旋转双重插值
移动和旋转双重插值。
要求两个运动保持加速时间，匀速时间，总时间完全一致。
首先需要判断主轴 。

通过引入等效半径r，主轴运动S。

$$
S = max(a*r, L)\\
$$


分支1, 旋转主轴
$$
A*r > L\\
S = A*r \\

L(t) =S(t)*L/S\\
A(t) = S(t)/r
$$
分支2, 移动主轴
$$
A*r < L\\

S = L\\

L(t) = S(t)\\
A(t) = S(t)*A/L

$$
#### 多轴梯形规划同步算法


- 多轴总时间同步
- 多轴总时间同步，加速时间，匀速时间同步

- 时间放缩算法
    - 同时松弛加速度和最大速度
- 最大速度松弛算法
- 加速度松弛算法

#### 时间放缩算法
总时间放大P倍
$$
S(t) = At^2+Bt+C\\
t = u/P
$$
代入，得到
$$
S(u) = (A/P^2)u^2+(B/P)u+C\\
V(u) = B/P  +A/P^2 * u
acc(u) = A/P^2\\
$$

#### 最大速度松弛算法

#### 加速度松弛算法

#### 多轴时间同步

已知两套梯形速度规划参数：距离1，速度1，加速度1；距离2，速度2，加速度2。

要求计算合适的速度1，加速度1，速度2，加速度2。

使时间完全一致：加速时间，匀速时间同步，总时间同步

显然有两种情况：梯形速度和三角形速度。


##### 三角形速度
$$
T_1 = \sqrt{S_1/A_1}\\


T_2 = \sqrt{S_2/A_2}\\

T = min(T_1, T_2)
$$

两个加速时间，选取时间长的作为主轴。
缩小短轴的加速度。
放缩长轴和短轴的最大速度。
#### 梯形速度
需要保持匀速时间一致 。

