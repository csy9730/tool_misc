# 浅谈 SSD，eMMC，UFS

[![Sean](https://pic3.zhimg.com/v2-488050021d4c419eb99f31f08408dcba_xs.jpg?source=172ae18b)](https://www.zhihu.com/people/sean-64-30)

[Sean](https://www.zhihu.com/people/sean-64-30)



中央处理器 (CPU)话题下的优秀答主

<svg class="Zi Zi--LabelEditorRecommendation css-2q0wp1-Label" fill="#C2A469" viewBox="0 0 24 24" width="20" height="20"><path d="M12.868 2.899l6.597 3.8c.537.31.868.881.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 0 1-.868-1.5V8.199c0-.619.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 0 1 1.736 0zm-2.614 11.85a.29.29 0 0 1 .255.148l1.239 2.207a.289.289 0 0 0 .504 0l1.24-2.207a.29.29 0 0 1 .254-.148l2.52.023a.29.29 0 0 0 .253-.434l-1.284-2.192a.288.288 0 0 1 0-.292l1.284-2.192a.288.288 0 0 0-.253-.434l-2.52.023a.29.29 0 0 1-.255-.148l-1.239-2.207a.289.289 0 0 0-.504 0l-1.24 2.207a.29.29 0 0 1-.254.148l-2.52-.023a.29.29 0 0 0-.253.434l1.284 2.192a.288.288 0 0 1 0 .292L7.48 14.338a.288.288 0 0 0 .253.434l2.52-.023z" fill-rule="evenodd"></path></svg>

编辑推荐

等 2 项收录

<svg class="Zi Zi--ArrowUp css-zzd7cz-Label" fill="#C2A469" viewBox="0 0 24 24" width="26" height="26"><path d="M12 11l-3.716 3.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l4.249-4.512a.758.758 0 0 1 1.064 0l4.246 4.512a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063 0L12.002 11z" fill-rule="evenodd"></path></svg>

1,920 人赞同了该文章

这个时候发这篇文章难免有蹭热点的嫌疑。。但作为一个计算机体系结构的研究生，在这些名词满天飞的时候，我的好奇心是抑制不住的，想一探这几样技术的究竟。

本文不对某一特定事件进行点评，仅从技术角度分析对比一下这三种技术。

就算是当做自己的技术储备+科普了

。

首先，这三种技术都是属于闪存（Flash Memory）的不同种类，区别主要在于控制器，接口标准以及更底层的 Flash 芯片标准。它们在电脑/手机等系统中的主要作用是作为存储设备（storage）/文件系统。（注意它们虽然也叫memory，但和运存的 memory是完全两回事儿）

以前电脑系统中的主要的存储设备是机械式磁盘，访问速度慢，体积庞大，功耗高，而且对震动非常敏感，因此很难用于小型化的移动设备里。Flash Memory 出现后，由于没有移动部件，几乎完美解决了以上机械硬盘的各种问题，因此很快在各种移动设备中获得广泛应用。（当然，Flash的写操作和寿命的问题也比较复杂，但这不是本文的讨论重点） 而且基于Flash 的 SSD 硬盘性能普遍好于传统机械硬盘，因此也成为了PC/服务器的主流存储设备。

那么既然 SSD，eMMC，UFS 都是 Flash，它们的区别在哪呢？

想要了解它们的区别，首先要了解他们解决的问题。

SSD 主要作用是取代 PC/服务器 上的 HDD 硬盘，它需要：

- 超大容量（百GB~TB级别）
- 极高的并行性以提高性能
- 对功耗，体积等要求并不敏感
- 兼容已有接口技术 （SATA，PCI等）

而 eMMC 和 UFS主要都是针对移动设备发明的，它们需要：

- 适当的容量
- 适当的性能
- 对功耗 ，体积的要求极其敏感
- 仅需遵循一定的接口标准 （稍后解释）

为了直观感受一下区别，我刚才特意找来了一个 PCIe 的 SSD，如下图，上面黑色的芯片就是Flash：

![img](https://pic3.zhimg.com/80/v2-4958dd9767acd849bd3da262ffb9b3a2_720w.jpg)

我又拆了一个手机，它里面的 Flash 芯片是这样的（中间那个最大的黑色芯片）：

![img](https://pic2.zhimg.com/80/v2-957715b141657f2a93a5387864ad8c99_720w.jpg)



看到区别了吗？ （之前写的文章各种被人盗转，只好给图打码了，见谅）

一个SSD，为了达到高并行高性能的要求，**有多个Flash 芯片**，这样就可以在每个芯片上进行相互独立的读写操作，以并行性来提高硬盘吞吐量，还可以增加冗余备份。而手机中为了节省空间和功耗，通常只有一片密度较高的 Flash 芯片。

管理一个 Flash 芯片，和管理多个 Flash 芯片，策略肯定是不一样的，因此它们的控制器 （controller）就完全不同了。而且 PC 上需要兼容 SATA 或 PCIe 或 m2 接口，这样你电脑硬盘坏了的时候，可以拔下来换上另一块同样接口的硬盘能照样用。而手机上的 Flash 芯片大多是直接焊在主板上的，基本上不需要考虑更换的问题，所以只要遵从一个特定标准，能和CPU正常通讯就好了。因此接口的不同也是 SSD 和 eMMC，UFS 的重要区别之一。

好了，SSD 和 （eMMC， UFS）的区别说完了，下面说一下可能很多人会关心的 eMMC 和 UFS 的区别了。

eMMC 和 UFS 都是面向移动端 Flash 的标准，区别在于，二者的接口技术大相径庭。

eMMC 是一个起源较早的技术，全称叫 embedded MultiMedia Card，为什么单单e是小写呢？ 因为先有的MMC啊。所谓MMC，大家可能没听过但可能见过，相机中用得较多，和SD卡长得很像（之前的图片就搞错了，感谢评论中各位的提醒）。

![img](https://pic4.zhimg.com/80/v2-b12a028730a174b19a87732edf0b952f_720w.jpg)

MMC前面加了个embedded，主要就是为了突出现在这个设备是embedded 在电路板上。eMMC 和 MMC一样，沿用了 8 bit 的并行接口。在传输速率不高的时代，这个接口够用了。但随着设备对接口的带宽要求越来越高，想把并行接口速率提高也越来越难。eMMC 的最新 5.1标准理论最高值最高可以达到400 MB/s，再往上提高频率也不是不行，但就未必划算了。

好在这几年接口串行化大潮轰轰烈烈。所谓接口串行化，简单来说就是工程师们发现：与其用一个比较宽的并行接口以较低的速率传输，用一个串行接口用非常高的速率传输似乎更划算一些（带宽，功率，成本各方面综合考虑）。所以这个时候 UFS 应运而生，用高速串行接口取代了并行接口，而且还是全双工的，也就是可以读写同时进行。所以相比 eMMC， UFS的理论性能提高不少，甚至可以达到一些SSD的水准。可以在下图直观感受一下，蓝色的是UFS，红色的是eMMC，当然是越高越好：



![img](https://pic1.zhimg.com/80/v2-ba48837215d491d335c4f29a30c049dc_720w.png)

（图片引自[1] Micron 的文档)



最后，大家可能比较关心的一个问题：我设计好了一个使用UFS的系统，然后悲伤地发现没有UFS可以用了，那能不能直接换成eMMC呢？

答案是不行的，因为 UFS 和 eMMC 接口完全不兼容，控制器也不可通用。下面两个示意图分别是eMMC和UFS的接口（图片引自[2][3] JEDEC标准）。



![img](https://pic3.zhimg.com/80/v2-613f7f6da5d7435ed67b2c82a3b0a09a_720w.png)

![img](https://pic4.zhimg.com/80/v2-63ac626aadf5012ea7a18cb1d72cd017_720w.png)

即使是示意图，也能看出两者的明显差别。eMMC有两条总线，分别传输指令数据输入和输出，而且因为是并行总线还要有额外的data strobe。而UFS则是有两条差分的数据lane，指令和数据都是以packet的形式发送的。就更不要提二者的信号线的电气特性也有很大差别了。这些将直接导致控制侧（CPU那边）SoC 的控制器和电路设计会有很大不同。



所以一个系统的SoC以及电路板一定要经过重新设计，才能把 UFS 替换成 eMMC，这不是在生产线上换个 Flash 芯片那么简单的事儿，还得经过比较长时间的设计和测试才行。否则想要快速拿出替代方案的话，恐怕从一开始就要设计兼容两套方案了，嗯。

\---------------------------------------------------

评论中有很多业内人士的讨论，我们大概可以得到以下新的结论：

一款SoC可以设计为兼容两种标准的。

相应地，电路板也可以用一套方案兼容两种标准，或者即使用两种不同方案，但成本都不高。

两套方案的软件驱动也不一样。

\----------------------------------------------------

[1] [UFS is here, and it’s very fast!](https://www.micron.com/about/blogs/2016/november/ufs-is-here-and-its-very-fast)

[2] JEDEC-JESD84-B51

[3] JEDEC-JESD220C

编辑于 2017-04-28

固态硬盘

闪存（NAND）

电脑硬件

赞同 1920