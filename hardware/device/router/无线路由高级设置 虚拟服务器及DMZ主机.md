# 无线路由高级设置 虚拟服务器及DMZ主机

[hetbsoft](https://blog.csdn.net/htb0556) 2014-12-29 16:33:59 ![img](https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes.png) 4316 ![img](https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect.png) 收藏

分类专栏： [网络通信](https://blog.csdn.net/htb0556/category_1914533.html)

转载至：http://wireless.it168.com/a2012/0104/1297/000001297880.shtml





　**虚拟服务器**

　　为保证局域网的安全，默认情况下，[路由器](http://product.it168.com/list/b/0409_1.shtml)会将局域网主机的IP地址隐藏起来，使因特网计算机无法主动与局域网计算机建立连接。因此，若要使因特网用户能够访问局域网内的服务器，需要设置虚拟服务器条目。

　　“虚拟服务器”定义了[路由器](http://product.pcpop.com/Router/10734_1.html)的因特网服务端口与局域网服务器IP地址之间的对应关系。因特网所有对此端口的服务请求都会转发给通过IP地址指定的局域网服务器，这样既保证了因特网用户成功访问局域网中的服务器，又不影响局域网内部的网络安全。

　　**需求介绍**

　　因为外网用户不能直接访问到局域网中的服务器，只能访问到路由器的外网地址，所以“虚拟服务器”的本质，其实就是将局域网中的服务器发布到路由器的外网地址上的某个端口上，当外网用户来访问路由器的外网地址时，其实访问的就是内网的服务器。

　　下面，我们通过一个实例来看一下“虚拟服务器”的具体应用。

　　**拓扑图如下所示：**

![无线路由高级设置 虚拟服务器及DMZ主机](https://blog.csdn.net/picshow/index912114.shtml)


　　**配置步骤**

　　1、WEB服务器

　　1) 内网搭建好服务器，保证内网pc可以正常访问，以及该服务器可以正常访问互联网;

　　2) 登陆路由器的管理界面，选择“转发规则”->“虚拟服务器”，进行对应的端口映射设置。如在外部使用8080端口访问内部80端口的WEB服务器。

![无线路由高级设置 虚拟服务器及DMZ主机](https://blog.csdn.net/picshow/index912115.shtml)


　　◆服务名称：填入该虚拟服务器规则的名称，最多支持28个字符。

　　◆外部端口：填入路由器提供给广域网访问时使用的端口，如本例中使用8080端口。

　　◆内部端口：填入局域网中服务器的端口，如本例中是80端口。

　　◆服务协议：可以选择TCP，UDP协议，或者可以都选(根据内网服务器而定)。

　　◆内部服务器IP：填入局域网中WEB服务器的IP地址，如本例中是192.168.1.100。

　　◆启用/禁用规则：“启用”表示此规则生效，“禁用”表示此规则不生效。

![无线路由高级设置 虚拟服务器及DMZ主机](https://blog.csdn.net/picshow/index912116.shtml)


　　填入所有的信息后，点击“新增”按钮，即可添加完成。添加后的规则信息如下：

　　3) 设置完成后，外网pc可以使用路由器的WAN口IP加外部端口号来访问内网的WEB服务器(假设本例WAN口IP为1.1.1.1，访问方式为http：//1.1.1.1：8080)。

　　4) 如果WAN口IP是通过PPPOE拨号或者动态获取的，用户可以通过申请花生壳动态域名，实现通过域名来访问内部服务器。

　　注意：若服务器对外开放端口是80端口，在实施端口映射前需要将路由器的管理端口更改，更改方法为：管理界面->系统服务->WEB服务器->服务端口->WEB服务端口，将默认的80端口修改为88或其他端口。修改后登陆路由器管理界面的方法为：http://LAN口IP地址:新端口。

　　**DMZ主机**

　　但在在某些特殊情况下，用户希望让局域网中的一台计算机完全暴露给广域网，以实现双向通信，此时可以把该计算机设置为DMZ主机。当外网用户访问路由器的外网地址时，其实访问的就是局域网中的计算机。

　　局域网中设置DMZ(Demilitarized Zone，非军事区)主机后，该主机将完全暴露给广域网，可以实现双向无限制通信。

　　DMZ主机实际上就是一个开放了所有端口的虚拟服务器，当需要设置的虚拟服务器的开放端口不确定时，可以把它设置成DMZ主机。

　　选择菜单转发规则→DMZ主机，可以在图 5-28所示界面中设置DMZ主机。

![无线路由高级设置 虚拟服务器及DMZ主机](https://blog.csdn.net/picshow/index912117.shtml)
▲　DMZ主机

　　DMZ状态： 选择是否启用DMZ主机功能。

　　DMZ主机IP地址： 输入要设置为DMZ主机的局域网计算机的静态IP地址。

　　完成设置后，点击保存按钮。

　　**实例：把局域网中IP地址为192.168.0.10的计算机设置为DMZ主机，以实现它与Internet上另一台主机的双向通信。**

　　设置方法：

![无线路由高级设置 虚拟服务器及DMZ主机](https://blog.csdn.net/picshow/index912113.shtml)


　　当把主机设置成DMZ主机后，该计算机完全暴露于外网，[防火墙](http://product.it168.com/list/b/0418_1.shtml)对该主机不再起作用。外网用户访问路由器外网地址时，访问的就是192.168.0.10这台计算机。

　　注意：

　　1. 添加DMZ主机可能会给该主机带来不安全因素，因此不要轻易使用这一选项。

　　2. DMZ主机的优先级低于虚拟服务器，因特网用户对路由器同一端口的访问将优先转发到虚拟服务器所对应的局域网服务器上。