# 浅析EtherCAT总线

[PLC攻城狮](https://www.zhihu.com/people/plcengineer)



西门子 电气工程师



65 人赞同了该文章



![img](https://pic4.zhimg.com/80/v2-a5c404108a4c830d5a0c61db4ee929c7_1440w.jpg)



## 引言

又到周末了，今天来聊一聊 EtherCAT总线。

> 一项技术发明一定不是为了发明而发明，一定是有需要解决问题的。

以太网用在工业通信中遇到了什么问题呢？

**首先工业通信的要求是：**

- **低延时**
- **高响应**
- **高可靠**

例如：如果通过传统的以太网协议要做实时数据的监控（1ms）， 主站发出的数据会被路由到每一个子站，子站再发数据回给主站。无论是子站还是主站都在不停的发数据和接受数据。

**就好像大家都开车去上班，每个数据帧就是一辆车，再保证不出事故的前提下，只有更宽的路才能保证不迟到，不堵车。**



![img](https://pic3.zhimg.com/80/v2-efd74be7bd63291acad9d504a4d4284a_1440w.jpg)



而工业通信还有一个特点，就是本身数据量不大（不是视频或下载），大部分都是开关量和模拟量。如果用以太网，则都要根据OSI模型一层一层加协议。就好比每个人上班都是要单独开一辆车一样。



![img](https://pic3.zhimg.com/80/v2-8c19d382b40efd7c30299d8839d4c55e_1440w.jpg)



所以想解决不迟到，只有两种方法：

- 修更宽的路（增加带宽）
- 大家都做公共交通（改变协议）

修更宽的路需要花更多的钱（整个网络硬件升级，整个网络速度遵循木桶原则）

**而是EtherCAT就是火车**

## 像火车一样的EtherCAT

> EtherCAT是一个开放架构，以以太网为基础的现场总线系统，其名称的CAT为控制自动化技术（Control Automation Technology）字首的缩写。EtherCAT是确定性的工业以太网，最早是由德国的Beckhoff（倍福）公司研发。

EtherCAT使用相同的物理和数据链路层。EtherCAT中，主站发送数据，整个网络可能只有一个数据帧依次将通过每个节点（像火车一样）。



![img](https://pic3.zhimg.com/80/v2-efc9863ca83350aa4da384c82667ff32_1440w.jpg)



主站是唯一允许发送帧的节点，子站只能转发帧。数据帧就像火车一样，从主站开出，途经各个子站，把对于子站的数据放下或者带上，最后回到主站。

这种方法有助于确保实时操作并避免延迟。



![img](https://pic4.zhimg.com/80/v2-2e2ce5ae8035f4ca57bce0df9d62bf2b_1440w.jpg)

EtherCAT数据帧像地铁一样

EtherCAT网络不需要交换机。每个EtherCAT设备通常有两个以太网端口，第一个端口是接收端口，另一个是发送端口，发送给另一个设备。

实时性是EtherCAT的主要优势，使得EtherCAT可以成为高性能的分散式I/O系统：包含一千个分散式数位输入/输出的程序资料交换只需30us，相当于在100Mbit/s的以太网传输125个字节的资料。读写一百个伺服轴的系统可以以10 kHz的速率更新，一般的更新速率约为1–30 kHz，但也可以使用较低的更新速率，以避免太频繁的直接内存存取影响主站个人电脑的运作。

虽然子站设备添加数据过程到数据帧过程中仍有一点延迟，但EtherCAT的单一数据流大大提高了带宽利用率。这个优点也可能是一个缺点。因为许多子站设备可能无法适应这种高速，使得EtherCAT网络可能需要放慢速度以适应这些设备。

EtherCAT还使用分布式时钟系统。当EtherCAT的数据帧通过每个节点时，节点向其数据添加“已接收消息”时间戳。每个节点在收到消息时添加时间戳，然后在返回主站的路上，当数据帧移回节点时，每个节点再次附加一个时间戳。



![img](https://pic3.zhimg.com/80/v2-2b0e0f3d2979c44725f8749a1a7a8272_1440w.jpg)



然后，主节点对每个节点都有准确的计算，因为时间戳数据是在每次数据帧传输时计算的。

借助EtherCAT固有环形拓扑，由于分布式时钟机制确保了每次准确的数据传输，这是EtherCAT的优势之一。

另一个优点是网络拓扑的形式。许多不同的网络拓扑可以在EtherCAT网络中使用。因为它使用以全双工（双向轨道），当检测到端头时，数据帧将自动从子站返主站。这使得EtherCAT的网络拓扑结构很灵活。



![img](https://pic4.zhimg.com/80/v2-6e89fedad7be4c02d8b7ba07ec856fd7_1440w.jpg)



考虑到EtherCAT所固有环技术，在环形拓扑中连接的网络将形成冗余结构。因为它本身就是一个环形。

EtherCAT与标准以太网相比具有很大的优势：响应时间快，每台设备的数据要求最低，和低实施成本。

通过上面的介绍是不是感觉到EtherCAT设计的很巧妙，因为它真的就像火车一样。

**更多精彩，请关注公众号：PLClion**

发布于 2019-08-31

实业

科技

通信

赞同 65