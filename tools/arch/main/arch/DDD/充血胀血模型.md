# 失血、贫血、充血、胀血模型

**失血模型**：只有getter/setter方法，没有任何业务逻辑，也不包含任何的实体关系。

优点：思路清晰，编写代码方便，所有业务都在service中。

缺点：service过重，业务中出现大概率重复调用的情况。

**贫血模型**：在这里Entity应该叫domain。简单来说，就是除了getter/setter方法外，兼任了组装实体的业务，并且保留实体之间的关系，或者说是实体之前的嵌套。依然是service–>DAO–>domain(entity)的层级关系。

优点：各层级单向依赖，结构清楚，很容易编写，也容易维护。稳定。

缺点：domain部分流转被封到了Service层，不够面向对象。Service也比较厚重。

**充血对象**：充血模型是将DAO也挪到domain中，由domain去持久化对象。调用关系变成了service–>domain–>DAO。

优点：很面向对象。Service很薄，

缺点：DAO和domain双向依赖，存在很多问题。划分domain和service业务混杂，不同人员有不同理解。Service也需要调用domain的业务方法，相当于又封装了业务。

**胀血对象**：取消Service层，只保留domain–>DAO。

优点：简化分层

缺点：业务暴露太多给Web层。service的业务也被强行加入了domain，可能引发domain不稳定。

四种模型中，失血和胀血模型，不应该被提倡，因为弊大于利。而贫血，充血这两种在技术上已经很成熟了。但是推荐使用贫血模型。因为充血模型中，DAO和domain双向依赖带来结构问题。而且在批量操作domain的结构，很不合理。**推荐**使用贫血模型，增加少量的业务在entity中。比如参数构造，getter/setter中加入少量的逻辑判断。编码优先级最高的是完成业务的同时，引起的BUG更少。至于是不是面向对象，BUG少就行了。

