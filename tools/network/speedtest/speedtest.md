# speedtest

## install
`pip install speedtest_cli`


## demo

```

H:\project\mylib\tool_misc>pip install speedtest-cli
Collecting speedtest-cli
  Downloading https://files.pythonhosted.org/packages/9f/39/65259b7054368b370d3183762484fa2c779ddc41633894d895f9d1720f45/speedtest_cli-2.1.3-py2.py3-none-any.whl
Installing collected packages: speedtest-cli
Successfully installed speedtest-cli-2.1.3

H:\project\mylib\tool_misc>speedtest-cli
Retrieving speedtest.net configuration...
Testing from China Mobile Guangdong (120.235.227.254)...
Retrieving speedtest.net server list...
Selecting best server based on ping...
Hosted by Guangzhou Unicom 5G (Guangzhou) [60.23 km]: 15.714 ms
Testing download speed................................................................................
Download: 168.40 Mbit/s
Testing upload speed......................................................................................................
Upload: 33.02 Mbit/s

```


## help
```
H:\project\mylib\tool_misc>speedtest-cli --help
usage: speedtest-cli [-h] [--no-download] [--no-upload] [--single] [--bytes]
                     [--share] [--simple] [--csv]
                     [--csv-delimiter CSV_DELIMITER] [--csv-header] [--json]
                     [--list] [--server SERVER] [--exclude EXCLUDE]
                     [--mini MINI] [--source SOURCE] [--timeout TIMEOUT]
                     [--secure] [--no-pre-allocate] [--version]

Command line interface for testing internet bandwidth using speedtest.net.
--------------------------------------------------------------------------
https://github.com/sivel/speedtest-cli

optional arguments:
  -h, --help            show this help message and exit
  --no-download         Do not perform download test
  --no-upload           Do not perform upload test
  --single              Only use a single connection instead of multiple. This
                        simulates a typical file transfer.
  --bytes               Display values in bytes instead of bits. Does not
                        affect the image generated by --share, nor output from
                        --json or --csv
  --share               Generate and provide a URL to the speedtest.net share
                        results image, not displayed with --csv
  --simple              Suppress verbose output, only show basic information
  --csv                 Suppress verbose output, only show basic information
                        in CSV format. Speeds listed in bit/s and not affected
                        by --bytes
  --csv-delimiter CSV_DELIMITER
                        Single character delimiter to use in CSV output.
                        Default ","
  --csv-header          Print CSV headers
  --json                Suppress verbose output, only show basic information
                        in JSON format. Speeds listed in bit/s and not
                        affected by --bytes
  --list                Display a list of speedtest.net servers sorted by
                        distance
  --server SERVER       Specify a server ID to test against. Can be supplied
                        multiple times
  --exclude EXCLUDE     Exclude a server from selection. Can be supplied
                        multiple times
  --mini MINI           URL of the Speedtest Mini server
  --source SOURCE       Source IP address to bind to
  --timeout TIMEOUT     HTTP timeout in seconds. Default 10
  --secure              Use HTTPS instead of HTTP when communicating with
                        speedtest.net operated servers
  --no-pre-allocate     Do not pre allocate upload data. Pre allocation is
                        enabled by default to improve upload performance. To
                        support systems with insufficient memory, use this
                        option to avoid a MemoryError
  --version             Show the version number and exit

```

### list
列出所有speedtest.net服务器
```
H:\project\mylib\tool_misc>speedtest-cli --list
Retrieving speedtest.net configuration...
26678) Guangzhou Unicom 5G (Guangzhou, China) [60.23 km]
16192) ShenZhen Unicom (ShenZhen, China) [90.50 km]
14903) CSL (Tai Po, Hong Kong) [101.14 km]
19036) SmarTone (Tai Po, Hong Kong) [101.20 km]
22991) Shanghai Huajuan Information Technology Co., Ltd. (Hong Kong, Hong Kong) [104.22 km]
32155) China Mobile Hong Kong (Kwai Chung, Hong Kong) [107.97 km]
13538) CSL (Kwai Chung, Hong Kong) [107.98 km]
16176) HGC鐠伴浕 (Shatin, Hong Kong) [109.07 km]
37267) 3HK (Tsing Yi, Hong Kong) [109.27 km]
43092) Suniway Telecom (Hong Kong, Hong Kong) [114.21 km]
41591) AAEX NETWORK TECHNOLOGY LTD (Hong Kong, Hong Kong) [114.61 km]
43357) 1010 (Kowloon, Hong Kong) [114.61 km]
32553) PassKit, Inc. (Sheung Wan, Hong Kong) [117.10 km]
34555) HKIX (Hong Kong, Hong Kong) [117.24 km]
37639) China Mobile Hong Kong Boardband (Tseung Kwan O, Hong Kong) [118.03 km]
37390) HGC鐠伴浕 (Central, Hong Kong) [118.07 km]
37695) China Unicom Global Limited (TKO, China) [118.07 km]
35791) SmarTone (Central, Hong Kong) [118.12 km]
42740) LSPISP (Central, Hong Kong) [118.12 km]
 1536) STC (Hong Kong, China) [121.50 km]
34809) HGC鐠伴浕 (Hong Kong, Hong Kong) [121.50 km]
35445) UDomain (Hong Kong, Hong Kong) [121.50 km]
22126) i3D.net (Hong Kong, Hong Kong) [121.50 km]
28912) fdcservers.net (Hong Kong, Hong Kong) [121.50 km]
 2993) Website Solution Limited (Hong Kong, China) [121.50 km]
40326) Boom!VM HK 10G (Hong Kong, China) [121.50 km]
42039) LiyingNetwork (Hong Kong, Hong Kong) [121.50 km]
43356) 1010 (Hong Kong, Hong Kong) [121.50 km]
14791) MTel (Macau, Macau) [124.67 km]
33250) CTM1 (Macau, Macau) [125.30 km]
 6894) CT-MACAU (Macau, Macau) [125.30 km]
25176) CTM2 (Taipa, Macau) [129.36 km]
33794) CTM3 (Coloane, Macau) [133.02 km]
28491) China Mobile HuNan 5G (ChangSha, China) [549.35 km]
28225) 婀栧崡鐢典俊5G (Changsha, China) [551.44 km]
 4870) 婀栧崡鑱旈€?G (Changsha, China) [551.44 km]
27794) GX-TELECOM (Nanning, China) [566.41 km]
 5674) GX-Unicom (Nanning, China) [566.41 km]
15863) GX ChinaMobile (Nanning, China) [566.41 km]
 4884) China Unicom FuJian (Fuzhou, China) [633.75 km]
11711) Taiwan Mobile (Tainan, Taiwan) [650.65 km]
24377) Homeplus (Tainan, Taiwan) [650.65 km]
18607) Chunghwa Mobile (Tainan, Taiwan) [650.65 km]
36122) HYA (Tainan, Taiwan) [650.65 km]
 4413) Chief Telecom (Tainan, Taiwan) [650.65 km]
19032) Friday Media (Tainan, Taiwan) [650.65 km]
40728) SEEDNET (Tainan, Taiwan) [650.65 km]
29284) Homeplus (Tainan South District, Taiwan) [651.35 km]
32319) TNIC (Tainan, Taiwan) [654.98 km]
 4945) Chief Telecom (Hsinying, Taiwan) [661.24 km]
 8968) Homeplus (Kaohsiung, Taiwan) [663.22 km]
 4941) Chief Telecom (Kaohsiung, Taiwan) [663.22 km]
18458) Chunghwa Mobile (Kaohsiung, Taiwan) [663.22 km]
18426) WiFly (Kaohsiung, Taiwan) [663.22 km]
38059) Taiwan Star Telecom Co., Ltd. (Kaohsiung, Taiwan) [663.22 km]
11713) Taiwan Mobile (Kaohsiung, Taiwan) [663.22 km]
29253) Homeplus (Kaohsiung Lingya, Taiwan) [669.37 km]
36636) SEEDNET (Kaohsiung Lingya, Taiwan) [669.37 km]
18479) Chief Telecom (Chiayi, Taiwan) [675.93 km]
41191) Taiwan Mobile (Chiayi, Taiwan) [675.93 km]
 4946) Chief Telecom (Pingtung, Taiwan) [685.76 km]
30349) PTC (Pingtung, Taiwan) [685.76 km]
40954) FarEasTone Telecom (Pingtung, Taiwan) [685.76 km]
18478) Chief Telecom (Douliu, Taiwan) [685.92 km]
11699) Taiwan Mobile (Douliu, Taiwan) [685.92 km]
18611) Chunghwa Mobile (Changhua, Taiwan) [686.69 km]
 5164) Chief Telecom (Changhua, Taiwan) [686.69 km]
11709) Taiwan Mobile (Changhua, Taiwan) [686.69 km]
17204) FarEasTone Telecom (Yuanlin City, Taiwan) [692.21 km]
17189) FarEasTone Telecom (Nantou City, Taiwan) [701.17 km]
18456) Chunghwa Mobile (Taichung, Taiwan) [702.47 km]
12000) TBC (Taichung, Taiwan) [702.47 km]
 4940) Chief Telecom (Taichung, Taiwan) [702.47 km]
 6391) Asia University, Taiwan (Taichung, Taiwan) [702.47 km]
 6597) Tunghai University (Taichung, Taiwan) [702.47 km]
 7469) TINP (Taichung, Taiwan) [702.47 km]
11707) Taiwan Mobile (Taichung, Taiwan) [702.47 km]
 7076) Feng Chia University (Taichung, Taiwan) [702.47 km]
40727) SEEDNET (Taichung, Taiwan) [702.47 km]
19210) Friday Media (Taichung City, Taiwan) [703.14 km]
40783) FarEasTone Telecom (Taichung, Taiwan) [709.53 km]
17185) Far EasTone Telecom (Miaoli City, Taiwan) [724.00 km]
35876) CRN-VCP (Taiwan, Taiwan) [728.57 km]
27752) Asia Pacific Telecom (Nantou, Taiwan) [731.37 km]
18477) Chief Telecom (Nantou, Taiwan) [731.37 km]
29109) Asia Pacific Telecom (Hsinchu, Taiwan) [745.75 km]
18450) Chunghwa Mobile (Hsinchu, Taiwan) [745.75 km]
11705) Taiwan Mobile (Hsinchu, Taiwan) [745.75 km]
40704) SEEDNET (Hsinchu, Taiwan) [745.75 km]
17206) FarEasTone Telecom (Zhubei City, Taiwan) [747.16 km]
18480) Chief Telecom (Taitung, Taiwan) [747.90 km]
17186) Far EasTone Telecom (Zhongli, Taiwan) [771.27 km]
29107) Asia Pacific Telecom (Taoyuan, Taiwan) [775.66 km]
18452) Chunghwa Mobile (Taoyuan, Taiwan) [775.66 km]
11702) Taiwan Mobile (Taoyuan, Taiwan) [775.66 km]
24462) Homeplus (Taoyuan, Taiwan) [775.66 km]
36634) SEEDNET (Taoyuan District, Taiwan) [780.79 km]
 2595) Far EasTone Telecommunications Co., Ltd (Hualien, Taiwan) [795.76 km]
11708) Taiwan Mobile (Hualien, Taiwan) [795.76 km]
 4948) Chief Telecom (Hualien, Taiwan) [795.76 km]
 ```


### 1
根据上面的列表，选了个距离较近的服务器测速
```
H:\project\mylib\tool_misc>speedtest-cli --server 32155
Retrieving speedtest.net configuration...
Testing from China Mobile Guangdong (120.235.227.255)...
Retrieving speedtest.net server list...
Retrieving information for the selected server...
Hosted by China Mobile Hong Kong (Kwai Chung) [107.97 km]: 22.383 ms
Testing download speed................................................................................
Download: 445.18 Mbit/s
Testing upload speed......................................................................................................
Upload: 34.05 Mbit/s
```